# 7.3 组件导航
## 7.3.1 组件介绍
组件导航（Navigation）主要用于实现页面间以及组件内部的页面跳转，支持在不同组件间传递跳转参数，提供灵活的跳转栈操作，从而更便捷地实现对不同页面的访问和复用。本文将从组件导航（Navigation）的显示模式、路由操作、子页面管理、跨包跳转以及跳转动效等几个方面进行详细介绍。

[Navigation](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation)是路由导航的根视图容器，一般作为页面（@Entry）的根容器，包括单栏（Stack）、分栏（Split）和自适应（Auto）三种显示模式。Navigation组件适用于模块内和跨模块的路由切换，通过组件级路由能力实现更加自然流畅的转场体验，并提供多种标题栏样式来呈现更好的标题和内容联动效果。一次开发，多端部署场景下，Navigation组件能够自动适配窗口显示大小，在窗口较大的场景下自动切换分栏展示效果。

Navigation组件主要包含​导航页和子页。导航页由标题栏（包含菜单栏）、内容区和工具栏组成，可以通过[hideNavBar](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation#hidenavbar9)属性进行隐藏，导航页不存在页面栈中，与子页，以及子页之间可以通过路由操作进行切换。
### 设置页面显示模式

Navigation组件通过mode属性设置页面的显示模式。

- 自适应模式
  Navigation组件默认为自适应模式，此时mode属性为NavigationMode.Auto。自适应模式下，当页面宽度大于等于一定阈值API version 9及以前：520vp，API version 10及以后：600vp )时，Navigation组件采用分栏模式，反之采用单栏模式。
	```ts
	Navigation() {
	  // ...
	}
	.mode(NavigationMode.Auto)
	```
- 单页面模式
	  ![image.png](https://harmonyos-1256472033.cos.ap-shanghai.myqcloud.com/20250513142129099.png)
	
	将mode属性设置为NavigationMode.Stack，Navigation组件即可设置为单页面显示模式。
	```ts
	Navigation() {
	  // ...
	}
	.mode(NavigationMode.Stack)
	```
### 加载视频资源
Video组件支持加载本地视频和网络视频。
#### 加载本地视频

资源：
![preview.png](https://harmonyos-1256472033.cos.ap-shanghai.myqcloud.com/20250513141524139.png)

![[videoTest.mp4]]

加载本地视频时，首先在本地rawfile目录指定对应的文件，如下图所示。

![image.png](https://harmonyos-1256472033.cos.ap-shanghai.myqcloud.com/20250513141524141.png)

再使用资源访问符$rawfile()引用视频资源。
```ts
// xxx.ets
@Component
export struct VideoPlayer {
  private controller: VideoController = new VideoController()
  private previewUris: Resource = $r('app.media.preview')
  private innerResource: Resource = $rawfile('videoTest.mp4')


  build() {
    Column() {
      Video({
        src: this.innerResource,
        previewUri: this.previewUris,
        controller: this.controller
      })
    }
  }
}
```

#### 加载沙箱路径视频?

支持file://路径前缀的字符串，用于读取应用沙箱路径内的资源，需要保证应用沙箱目录路径下的文件存在并且有可读权限。

```ts
// xxx.ets
@Component
export struct VideoPlayer {
  private controller: VideoController = new VideoController()
  private videoSrc: string = 'file:///data/storage/el2/base/haps/entry/files/show.mp4'


  build() {
    Column() {
      Video({
        src: this.videoSrc,
        controller: this.controller
      })
    }
  }
}
```
#### 加载网络视频

加载网络视频时，需要申请权限ohos.permission.INTERNET，具体申请方式请参考[声明权限](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions)。此时，Video的src属性为网络视频的链接。

```ts
// xxx.ets
@Component
export struct VideoPlayer {
  private controller: VideoController = new VideoController()
  private previewUris: Resource = $r('app.media.preview')
  private videoSrc: string = 'http://vd3.bdstatic.com/mda-merqt9w12asswjse/360p/h264/1622050246127682391/mda-merqt9w12asswjse.mp4' // 使用时请替换为实际视频加载网址


  build() {
    Column() {
      Video({
        src: this.videoSrc,
        previewUri: this.previewUris,
        controller: this.controller
      })
    }
  }
}
```

### 添加属性

Video组件[属性](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-media-components-video#%E5%B1%9E%E6%80%A7)主要用于设置视频的播放形式。例如设置视频播放是否静音、播放是否显示控制条等。

```ts
// xxx.ets
@Component
export struct VideoPlayer {
  private controller: VideoController = new VideoController()


  build() {
    Column() {
      Video({
        controller: this.controller
      })
        .muted(false) // 设置是否静音
        .controls(false) // 设置是否显示默认控制条
        .autoPlay(false) // 设置是否自动播放
        .loop(false) // 设置是否循环播放
        .objectFit(ImageFit.Contain) // 设置视频适配模式
    }
  }
}
```

### 事件调用

Video组件回调事件主要为播放开始、暂停结束、播放失败、播放停止、视频准备和操作进度条等事件，除此之外，Video组件也支持通用事件的调用，如点击、触摸等事件的调用。

```ts
// xxx.ets
@Entry
@Component
struct VideoPlayer {
  private controller: VideoController = new VideoController()
  private previewUris: Resource = $r('app.media.preview')
  private innerResource: Resource = $rawfile('videoTest.mp4')


  build() {
    Column() {
      Video({
        src: this.innerResource,
        previewUri: this.previewUris,
        controller: this.controller
      })
        .onUpdate((event) => { // 更新事件回调
          console.info("Video update.");
        })
        .onPrepared((event) => { // 准备事件回调
          console.info("Video prepared.");
        })
        .onError(() => { // 失败事件回调
          console.info("Video error.");
        })
        .onStop(() => { // 停止事件回调
          console.info("Video stopped.");
        })
    }
  }
}
```

### Video控制器使用

Video控制器主要用于控制视频的状态，包括播放、暂停、停止以及设置进度等。

首先需要声明控制器
```ts
controller: VideoController = new VideoController()
```

然后利用在Video组件中设置控制器

```ts
@Entry  
@Component  
struct Index {  
  private controller: VideoController = new VideoController()  
  private previewUris: Resource = $r('app.media.preview')  
  private innerResource: Resource = $rawfile('videoTest.mp4')
  
  
  build() {  
    Column() {  
      Video({  
        src: this.innerResource,  
        previewUri: this.previewUris,  
        controller: this.controller  
      })  
        .width('100%')  
        .height(600)  
  
      Row() {  
        Button('start').onClick(() => {  
          this.controller.start() // 开始播放  
        }).margin(2)  
        Button('pause').onClick(() => {  
          this.controller.pause() // 暂停播放  
        }).margin(2)  
        Button('stop').onClick(() => {  
          this.controller.stop() // 结束播放  
        }).margin(2)  
        Button('reset').onClick(() => {  
          this.controller.reset() // 重置AVPlayer  
        }).margin(2)  
        Button('setTime').onClick(() => {  
          this.controller.setCurrentTime(10, SeekMode.Accurate) // 精准跳转到视频的10s位置  
        }).margin(2)  
      }  
    }  
	}
}
```

## 7.1.2 组件案例