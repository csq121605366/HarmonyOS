# 6.5 显示图片组件
## 组件介绍
## 



开发者经常需要在应用中显示一些图片，例如：按钮中的icon、网络图片、本地图片等。在应用中显示图片需要使用Image组件实现，Image支持多种图片格式，包括png、jpg、bmp、svg、gif和heif，具体用法请参考 [Image](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image) 组件。

Image通过调用接口来创建，接口调用形式如下：


```typescript
Image(src: PixelMap | ResourceStr | DrawableDescriptor)
```

该接口通过图片数据源获取图片，支持本地图片和网络图片的渲染展示。其中，src是图片的数据源，加载方式请参考 [加载图片资源](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-graphics-display#%E5%8A%A0%E8%BD%BD%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90) 。

## 加载图片资源

Image支持加载存档图、多媒体像素图两种类型。

### 存档图类型数据源

存档图类型的数据源可以分为本地资源、网络资源、Resource资源、媒体库资源和base64。

- 本地资源
	创建文件夹，将本地图片放入ets文件夹下的任意位置。
	Image组件引入本地图片路径，即可显示图片（根目录为ets文件夹）。
	收起
	深色代码主题
	复制
	```typescript
	Image('images/view.jpg').width(200)
	```
	加载本地图片过程中，如果对图片进行修改或者替换，可能会引起应用崩溃。因此需要覆盖图片文件时，应该先删除该文件再重新创建一个同名文件。
- 网络资源
	引入网络图片需申请权限ohos.permission.INTERNET，具体申请方式请参考 [声明权限](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions) 。此时，Image组件的src参数为网络图片的链接。
	当前Image组件仅支持加载简单网络图片。
	Image组件首次加载网络图片时，需要请求网络资源，非首次加载时，默认从缓存中直接读取图片，更多图片缓存设置请参考 [setImageCacheCount](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-system-app#setimagecachecount7) 、 [setImageRawDataCacheSize](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-system-app#setimagerawdatacachesize7) 、 [setImageFileCacheSize](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-system-app#setimagefilecachesize7) 。但是，这三个图片缓存接口并不灵活，且后续不继续演进，对于复杂情况，更推荐使用 [ImageKnife](https://gitee.com/openharmony-tpc/ImageKnife) 。
	网络图片必须支持RFC 9113标准，否则会导致加载失败。如果下载的网络图片大于10MB或一次下载的网络图片数量较多，建议使用 [HTTP](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/http-request) 工具提前预下载，提高图片加载性能，方便应用侧管理数据。
	API version 14及之后，Image组件在显示网络图片时，网络图片下载与缓存能力将不再内嵌于Image组件中，而是剥离至上传下载模块进行统一管理。上传下载模块提供独立的预下载接口，允许应用开发者在创建Image组件前预下载所需图片。组件创建后，通过向上传下载模块请求数据，从而优化了Image组件的显示流程。关于网络缓存的位置，对于API version 14之前的版本，Image组件的缓存位于应用的本地沙箱路径下，而对于API version 14及之后的版本，缓存则移至应用根目录下的cache目录中。
	收起
	深色代码主题
	复制
	```typescript
	Image('https://www.example.com/example.JPG') // 实际使用时请替换为真实地址
	```
- Resource资源
	使用资源格式可以跨包/跨模块引入图片，resources文件夹下的图片都可以通过$r资源接口读取到并转换到Resource格式。
	**图1** resources
	![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.62701104073277598239214197501565:50001231000000:2800:1E54A4687C221B7935B4790535876A003D4EE8883AA70D97FDB9AD3D3657C07B.jpg)
	调用方式：
	收起
	深色代码主题
	复制
	```bash
	Image($r('app.media.icon'))
	```
	还可以将图片放在rawfile文件夹下。
	**图2** rawfile
	![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.28725260340684397956491754441022:50001231000000:2800:F29FF94E92F781571DD46EC5498E4D51BF2442D95DCDD5FF2194CD2CB5C3B278.jpg)
	调用方式：
	收起
	深色代码主题
	复制
	```bash
	Image($rawfile('example1.png'))
	```
- 媒体库file://data/storage
	支持file://路径前缀的字符串，用于访问通过 [选择器](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-picker) 提供的图片路径。
	1. 调用接口获取图库的照片url。
		收起
		深色代码主题
		复制
		```typescript
		import { photoAccessHelper } from '@kit.MediaLibraryKit';import { BusinessError } from '@kit.BasicServicesKit';
		@Entry@Componentstruct Index {  @State imgDatas: string[] = [];  // 获取照片url集  getAllImg() {    try {      let PhotoSelectOptions:photoAccessHelper.PhotoSelectOptions = new photoAccessHelper.PhotoSelectOptions();      PhotoSelectOptions.MIMEType = photoAccessHelper.PhotoViewMIMETypes.IMAGE_TYPE;      PhotoSelectOptions.maxSelectNumber = 5;      let photoPicker:photoAccessHelper.PhotoViewPicker = new photoAccessHelper.PhotoViewPicker();      photoPicker.select(PhotoSelectOptions).then((PhotoSelectResult:photoAccessHelper.PhotoSelectResult) => {        this.imgDatas = PhotoSelectResult.photoUris;        console.info('PhotoViewPicker.select successfully, PhotoSelectResult uri: ' + JSON.stringify(PhotoSelectResult));      }).catch((err:Error) => {        let message = (err as BusinessError).message;        let code = (err as BusinessError).code;        console.error(\`PhotoViewPicker.select failed with. Code: ${code}, message: ${message}\`);      });    } catch (err) {      let message = (err as BusinessError).message;      let code = (err as BusinessError).code;      console.error(\`PhotoViewPicker failed with. Code: ${code}, message: ${message}\`);    }  }
		  // aboutToAppear中调用上述函数，获取图库的所有图片url，存在imgDatas中  async aboutToAppear() {    this.getAllImg();  }  // 使用imgDatas的url加载图片。  build() {    Column() {      Grid() {        ForEach(this.imgDatas, (item:string) => {          GridItem() {            Image(item)              .width(200)          }        }, (item:string):string => JSON.stringify(item))      }    }.width('100%').height('100%')  }}
		```
	2. 从媒体库获取的url格式通常如下。
		收起
		深色代码主题
		复制
		```typescript
		Image('file://media/Photos/5').width(200)
		```
- base64
	路径格式为data:image/\[png|jpeg|bmp|webp|heif\];base64,\[base64 data\]，其中\[base64 data\]为Base64字符串数据。
	Base64格式字符串可用于存储图片的像素数据，在网页上使用较为广泛。

### 多媒体像素图

PixelMap是图片解码后的像素图，具体用法请参考 [图片开发指导](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-overview) 。以下示例将加载的网络图片返回的数据解码成PixelMap格式，再显示在Image组件上。

1. 创建PixelMap状态变量。
	收起
	深色代码主题
	复制
	```typescript
	@State image: PixelMap | undefined = undefined;
	```
2. 引用多媒体。
	(1) 引用网络权限与媒体库权限。
	收起
	深色代码主题
	复制
	```typescript
	import { http } from '@kit.NetworkKit';import { image } from '@kit.ImageKit';import { BusinessError } from '@kit.BasicServicesKit';
	```
	(2) 填写网络图片地址。
	收起
	深色代码主题
	复制
	```typescript
	let OutData: http.HttpResponsehttp.createHttp().request("https://www.example.com/xxx.png",  (error: BusinessError, data: http.HttpResponse) => {    if (error) {      console.error(\`http request failed with. Code: ${error.code}, message: ${error.message}\`);    } else {      OutData = data    }  })
	```
3. 将网络地址成功返回的数据，编码转码成pixelMap的图片格式。
	收起
	深色代码主题
	复制
	```typescript
	let code: http.ResponseCode | number = OutData.responseCodeif (http.ResponseCode.OK === code) {  let imageData: ArrayBuffer = OutData.result as ArrayBuffer;  let imageSource: image.ImageSource = image.createImageSource(imageData);
	  class tmp {    height: number = 100    width: number = 100  }
	  let si: tmp = new tmp()  let options: Record<string, number | boolean | tmp> = {    'alphaType': 0, // 透明度    'editable': false, // 是否可编辑    'pixelFormat': 3, // 像素格式    'scaleMode': 1, // 缩略值    'size': { height: 100, width: 100 }  } // 创建图片大小
	  class imagetmp {    image: PixelMap | undefined = undefined    set(val: PixelMap) {      this.image = val    }  }
	  imageSource.createPixelMap(options).then((pixelMap: PixelMap) => {    let im = new imagetmp()    im.set(pixelMap)  })}
	```
4. 显示图片。
	收起
	深色代码主题
	复制
	```typescript
	class htp{  httpRequest: Function | undefined = undefined  set(){    if(this.httpRequest){      this.httpRequest()    }  }}Button("获取网络图片")  .onClick(() => {    let sethtp = new htp()    sethtp.set()  })Image(this.image).height(100).width(100)
	```
	同时，也可以传入pixelMap创建 [PixelMapDrawableDescriptor](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#pixelmapdrawabledescriptor12) 对象，用来显示图片。
	收起
	深色代码主题
	复制
	```typescript
	import { DrawableDescriptor, PixelMapDrawableDescriptor } from '@kit.ArkUI'class htp{  httpRequest: Function | undefined = undefined  set(){    if(this.httpRequest){      this.httpRequest()    }  }}Button("获取网络图片")  .onClick(() => {    let sethtp = new htp()    sethtp.set()    this.drawablePixelMap = new PixelMapDrawableDescriptor(this.image)  })Image(this.drawablePixelMap).height(100).width(100)
	```

## 显示矢量图

Image组件可显示矢量图（svg格式的图片），svg标签文档请参考 [svg说明](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-svg) 。

如果SVG图片没有原始大小，需要给Image组件设置宽高，否则不显示。如果SVG图片通过image标签引用本地其他图片，被引用的图片不支持svg格式和gif格式。

svg格式的图片可以使用fillColor属性改变图片的绘制颜色。

收起

深色代码主题

复制

```typescript
Image($r('app.media.cloud'))  .width(50)  .fillColor(Color.Blue)
```

**图3** 原始图片

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.68557507154797232269393870798515:50001231000000:2800:A529CA6CCCA207650C0CF0B3F468CAAC3EA1A087B4106CD1217EA9005ED63599.png)

**图4** 设置绘制颜色后的svg图片

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.87131386884559530756198868281605:50001231000000:2800:45403504445AC937350E829394304525A6E6C40B134266BA1C50B71823FE7418.png)

### 矢量图引用位图

如果Image加载的Svg图源中包含对本地位图的引用，则Svg图源的路径应当设置为以ets为根目录的工程路径，同时，本地位图的路径应设置为与Svg图源同级的相对路径。

Image加载的Svg图源路径设置方法如下所示：

收起

深色代码主题

复制

```typescript
Image("images/icon.svg")  .width(50)  .height(50)
```

Svg图源通过<image>标签的xlink:href属性指定本地位图路径，本地位图路径设置为跟Svg图源同级的相对路径：

收起

深色代码主题

复制

```typescript
<svg width="200" height="200">  <image width="200" height="200" xlink:href="sky.png"></image></svg>
```

文件工程路径示例如图：

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.18437326907763801152945075233309:50001231000000:2800:9AF74621681B8F577E6804C5F856D642A4070FBA2D31DD17BBA96C6E9D8504BB.png)

## 添加属性

给Image组件设置属性可以使图片显示更灵活，达到一些自定义的效果。以下是几个常用属性的使用示例，完整属性信息详见 [Image](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image) 。

### 设置图片缩放类型

通过objectFit属性使图片缩放到高度和宽度确定的框内。

收起

深色代码主题

复制

```typescript
@Entry@Componentstruct MyComponent {  scroller: Scroller = new Scroller()
  build() {    Scroll(this.scroller) {      Column() {        Row() {          Image($r('app.media.img_2'))            .width(200)            .height(150)            .border({ width: 1 })              // 保持宽高比进行缩小或者放大，使得图片完全显示在显示边界内。            .objectFit(ImageFit.Contain)            .margin(15)            .overlay('Contain', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })          Image($r('app.media.ic_img_2'))            .width(200)            .height(150)            .border({ width: 1 })              // 保持宽高比进行缩小或者放大，使得图片两边都大于或等于显示边界。            .objectFit(ImageFit.Cover)            .margin(15)            .overlay('Cover', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })          Image($r('app.media.img_2'))            .width(200)            .height(150)            .border({ width: 1 })              // 自适应显示。            .objectFit(ImageFit.Auto)            .margin(15)            .overlay('Auto', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })        }
        Row() {          Image($r('app.media.img_2'))            .width(200)            .height(150)            .border({ width: 1 })              // 不保持宽高比进行放大缩小，使得图片充满显示边界。            .objectFit(ImageFit.Fill)            .margin(15)            .overlay('Fill', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })          Image($r('app.media.img_2'))            .width(200)            .height(150)            .border({ width: 1 })              // 保持宽高比显示，图片缩小或者保持不变。            .objectFit(ImageFit.ScaleDown)            .margin(15)            .overlay('ScaleDown', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })          Image($r('app.media.img_2'))            .width(200)            .height(150)            .border({ width: 1 })              // 保持原有尺寸显示。            .objectFit(ImageFit.None)            .margin(15)            .overlay('None', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })        }      }    }  }}
```

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.93317832689078111927297915416145:50001231000000:2800:68F70812675FE59E962DEFCF648538BF7BA24A0C764AD8E1113E760539419745.png)

### 图片插值

当原图分辨率较低并且放大显示时，图片会模糊出现锯齿。这时可以使用interpolation属性对图片进行插值，使图片显示得更清晰。

收起

深色代码主题

复制

```typescript
@Entry@Componentstruct Index {  build() {    Column() {      Row() {        Image($r('app.media.grass'))          .width('40%')          .interpolation(ImageInterpolation.None)          .borderWidth(1)          .overlay("Interpolation.None", { align: Alignment.Bottom, offset: { x: 0, y: 20 } })          .margin(10)        Image($r('app.media.grass'))          .width('40%')          .interpolation(ImageInterpolation.Low)          .borderWidth(1)          .overlay("Interpolation.Low", { align: Alignment.Bottom, offset: { x: 0, y: 20 } })          .margin(10)      }.width('100%')      .justifyContent(FlexAlign.Center)
      Row() {        Image($r('app.media.grass'))          .width('40%')          .interpolation(ImageInterpolation.Medium)          .borderWidth(1)          .overlay("Interpolation.Medium", { align: Alignment.Bottom, offset: { x: 0, y: 20 } })          .margin(10)        Image($r('app.media.grass'))          .width('40%')          .interpolation(ImageInterpolation.High)          .borderWidth(1)          .overlay("Interpolation.High", { align: Alignment.Bottom, offset: { x: 0, y: 20 } })          .margin(10)      }.width('100%')      .justifyContent(FlexAlign.Center)    }    .height('100%')  }}
```

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.60601659402660611573372252998039:50001231000000:2800:586CFD394E120972C6C795516C396B70D7E9F3432C074DE607E7C0E0BA3C8CEA.png)

### 设置图片重复样式

通过objectRepeat属性设置图片的重复样式方式，重复样式请参考 [ImageRepeat](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#imagerepeat) 枚举说明。

收起

深色代码主题

复制

```typescript
@Entry@Componentstruct MyComponent {  build() {    Column({ space: 10 }) {      Row({ space: 5 }) {        Image($r('app.media.ic_public_favor_filled_1'))          .width(110)          .height(115)          .border({ width: 1 })          .objectRepeat(ImageRepeat.XY)          .objectFit(ImageFit.ScaleDown)          // 在水平轴和竖直轴上同时重复绘制图片          .overlay('ImageRepeat.XY', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })        Image($r('app.media.ic_public_favor_filled_1'))          .width(110)          .height(115)          .border({ width: 1 })          .objectRepeat(ImageRepeat.Y)          .objectFit(ImageFit.ScaleDown)          // 只在竖直轴上重复绘制图片          .overlay('ImageRepeat.Y', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })        Image($r('app.media.ic_public_favor_filled_1'))          .width(110)          .height(115)          .border({ width: 1 })          .objectRepeat(ImageRepeat.X)          .objectFit(ImageFit.ScaleDown)          // 只在水平轴上重复绘制图片          .overlay('ImageRepeat.X', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })      }    }.height(150).width('100%').padding(8)  }}
```

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.31573778794856713875927257980329:50001231000000:2800:416C55E93C3AD448844EE423811146E36F87E00799B2482BAC1FD6DC77E891B2.png)

### 设置图片渲染模式

通过renderMode属性设置图片的渲染模式为原色或黑白。

收起

深色代码主题

复制

```typescript
@Entry@Componentstruct MyComponent {  build() {    Column({ space: 10 }) {      Row({ space: 50 }) {        Image($r('app.media.example'))          // 设置图片的渲染模式为原色           .renderMode(ImageRenderMode.Original)          .width(100)          .height(100)          .border({ width: 1 })            // overlay是通用属性，用于在组件上显示说明文字          .overlay('Original', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })        Image($r('app.media.example'))          // 设置图片的渲染模式为黑白          .renderMode(ImageRenderMode.Template)          .width(100)          .height(100)          .border({ width: 1 })          .overlay('Template', { align: Alignment.Bottom, offset: { x: 0, y: 20 } })      }    }.height(150).width('100%').padding({ top: 20,right: 10 })  }}
```

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.84115026974478057462464871693317:50001231000000:2800:8697383F1F12056EC67615BB24F857A4E39A0544D852267C0FBAF5F6938FEE09.png)

### 设置图片解码尺寸

通过sourceSize属性设置图片解码尺寸，降低图片的分辨率。

原图尺寸为1280\*960，该示例将图片解码为40\*40和90\*90。

收起

深色代码主题

复制

```typescript
@Entry@Componentstruct Index {  build() {    Column() {      Row({ space: 50 }) {        Image($r('app.media.example'))          .sourceSize({            width: 40,            height: 40          })          .objectFit(ImageFit.ScaleDown)          .aspectRatio(1)          .width('25%')          .border({ width: 1 })          .overlay('width:40 height:40', { align: Alignment.Bottom, offset: { x: 0, y: 40 } })        Image($r('app.media.example'))          .sourceSize({            width: 90,            height: 90          })          .objectFit(ImageFit.ScaleDown)          .width('25%')          .aspectRatio(1)          .border({ width: 1 })          .overlay('width:90 height:90', { align: Alignment.Bottom, offset: { x: 0, y: 40 } })      }.height(150).width('100%').padding(20)    }  }}
```

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.01194310863781041274624515161095:50001231000000:2800:FEE53F4667C5A9B3C52C8C9FAFE06142D57B1D62526947E467B3E0C0A092B805.png)

### 为图片添加滤镜效果

通过colorFilter修改图片的像素颜色，为图片添加滤镜。

收起

深色代码主题

复制

```typescript
@Entry@Componentstruct Index {  build() {    Column() {      Row() {        Image($r('app.media.example'))          .width('40%')          .margin(10)        Image($r('app.media.example'))          .width('40%')          .colorFilter(            [1, 1, 0, 0, 0,             0, 1, 0, 0, 0,             0, 0, 1, 0, 0,             0, 0, 0, 1, 0])          .margin(10)      }.width('100%')      .justifyContent(FlexAlign.Center)    }  }}
```

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115356.63859388664376039063263354606062:50001231000000:2800:5A6A2A221B20B286146F1620921BB6927FC2AEFC65D8BFE97346BC3F843A491C.png)

### 同步加载图片

一般情况下，图片加载流程会异步进行，以避免阻塞主线程，影响UI交互。但是特定情况下，图片刷新时会出现闪烁，这时可以使用syncLoad属性，使图片同步加载，从而避免出现闪烁。不建议图片加载较长时间时使用，会导致页面无法响应。

收起

深色代码主题

复制

```typescript
Image($r('app.media.icon'))  .syncLoad(true)
```

## 事件调用

通过在Image组件上绑定onComplete事件，图片加载成功后可以获取图片的必要信息。如果图片加载失败，也可以通过绑定onError回调来获得结果。

收起

深色代码主题

复制

```typescript
@Entry@Componentstruct MyComponent {  @State widthValue: number = 0  @State heightValue: number = 0  @State componentWidth: number = 0  @State componentHeight: number = 0
  build() {    Column() {      Row() {        Image($r('app.media.ic_img_2'))          .width(200)          .height(150)          .margin(15)          .onComplete(msg => {            if(msg){              this.widthValue = msg.width              this.heightValue = msg.height              this.componentWidth = msg.componentWidth              this.componentHeight = msg.componentHeight            }          })            // 图片获取失败，打印结果          .onError(() => {            console.info('load image fail')          })          .overlay('\nwidth: ' + String(this.widthValue) + ', height: ' + String(this.heightValue) + '\ncomponentWidth: ' + String(this.componentWidth) + '\ncomponentHeight: ' + String(this.componentHeight), {            align: Alignment.Bottom,            offset: { x: 0, y: 60 }          })      }    }  }}
```

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20250430115357.25537515438061308052442860050009:50001231000000:2800:9EB5B6F32F4C1F7EA8DEAB15CDCACF6D284937FDFA3344BD63AF85B5E7743A88.png)